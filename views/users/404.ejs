<!DOCTYPE html>
<html>
  <head>
    <title>teccas</title>
  </head>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <!-- animate CSS -->
  <link rel="stylesheet" href="css/animate.css" />
  <!-- owl carousel CSS -->
  <link rel="stylesheet" href="css/owl.carousel.min.css" />
  <!-- nice select CSS -->
  <link rel="stylesheet" href="css/nice-select.css" />
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/all.css" />
  <!-- flaticon CSS -->
  <link rel="stylesheet" href="css/flaticon.css" />
  <link rel="stylesheet" href="css/themify-icons.css" />
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/magnific-popup.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
  />
  <!-- swiper CSS -->
  <link rel="stylesheet" href="css/slick.css" />
  <link rel="stylesheet" href="css/price_rangs.css" />
  <!-- style CSS -->
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <body>
    <h1>Product Search</h1>
    <form id="search-form">
      <label for="search-input">Search:</label>
      <input type="text" id="search-input" name="search" />
      <br />

      <label for="brand-select">Brand:</label>
      <select id="brand-select" name="brand">
        <option value="">All</option>
        <% brand.forEach((brand) => { %>
        <option value="<%= brand._id %>"><%= brand.brandName %></option>
        <% }); %>
      </select>
      <br />
      <label for="brand-select">Category:</label>
      <select id="category-select" name="category">
        <option value="">All</option>
        <% category.forEach((category) => { %>
        <option value="<%= category._id %>"><%= category.name %></option>
        <% }); %>
      </select>
      <br />
      <label for="min-price-input">Min Price:</label>
      <input type="number" id="min-price-input" name="minPrice" />
      <br />
      <label for="max-price-input">Max Price:</label>
      <input type="number" id="max-price-input" name="maxPrice" />
      <br />
      <label for="sort">Sort by:</label>
      <select name="sort" id="sort">
        <option>relevant</option>
        <option value="low-to-high">Price: Low to High</option>
        <option value="high-to-low">Price: High to Low</option>
      </select>
      <br />
      <button type="submit">Search</button>
    </form>
    <div id="results-container"></div>


   <!-- product_list part start-->
    <!-- <section class="product_list best_seller">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="section_tittle text-center">
                        <h2>Best Sellers <span>shop</span></h2>
                    </div>
                </div>
            </div>
            <div class="row align-items-center justify-content-between">
                <div class="col-lg-12">
                    <div class="best_product_slider owl-carousel">
                        <div class="single_product_item">
                            <img src="img/product/product_1.png" alt="">
                            <div class="single_product_text">
                                <h4>Quartz Belt Watch</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                        <div class="single_product_item">
                            <img src="img/product/product_2.png" alt="">
                            <div class="single_product_text">
                                <h4>Quartz Belt Watch</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                        <div class="single_product_item">
                            <img src="img/product/product_3.png" alt="">
                            <div class="single_product_text">
                                <h4>Quartz Belt Watch</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                        <div class="single_product_item">
                            <img src="img/product/product_4.png" alt="">
                            <div class="single_product_text">
                                <h4>Quartz Belt Watch</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                        <div class="single_product_item">
                            <img src="img/product/product_5.png" alt="">
                            <div class="single_product_text">
                                <h4>Quartz Belt Watch</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section> -->
    <!-- product_list part end-->

    <!--::footer_part start::-->
    <!-- <footer class="footer_part">
        <div class="container">
            <div class="row justify-content-around">
                <div class="col-sm-6 col-lg-2">
                    <div class="single_footer_part">
                        <h4>Top Products</h4>
                        <ul class="list-unstyled">
                            <li><a href="">Managed Website</a></li>
                            <li><a href="">Manage Reputation</a></li>
                            <li><a href="">Power Tools</a></li>
                            <li><a href="">Marketing Service</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <div class="single_footer_part">
                        <h4>Quick Links</h4>
                        <ul class="list-unstyled">
                            <li><a href="">Jobs</a></li>
                            <li><a href="">Brand Assets</a></li>
                            <li><a href="">Investor Relations</a></li>
                            <li><a href="">Terms of Service</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <div class="single_footer_part">
                        <h4>Features</h4>
                        <ul class="list-unstyled">
                            <li><a href="">Jobs</a></li>
                            <li><a href="">Brand Assets</a></li>
                            <li><a href="">Investor Relations</a></li>
                            <li><a href="">Terms of Service</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-lg-2">
                    <div class="single_footer_part">
                        <h4>Resources</h4>
                        <ul class="list-unstyled">
                            <li><a href="">Guides</a></li>
                            <li><a href="">Research</a></li>
                            <li><a href="">Experts</a></li>
                            <li><a href="">Agencies</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                    <div class="single_footer_part">
                        <h4>Newsletter</h4>
                        <p>Heaven fruitful doesn't over lesser in days. Appear creeping
                        </p>
                        <div id="mc_embed_signup">
                            <form target="_blank"
                                action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                                method="get" class="subscribe_form relative mail_part">
                                <input type="email" name="email" id="newsletter-form-email" placeholder="Email Address"
                                    class="placeholder hide-on-focus" onfocus="this.placeholder = ''"
                                    onblur="this.placeholder = ' Email Address '">
                                <button type="submit" name="submit" id="newsletter-submit"
                                    class="email_icon newsletter-submit button-contactForm">subscribe</button>
                                <div class="mt-10 info"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="copyright_part">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="copyright_text">
                         -->
                        <!-- </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="footer_icon social_icon">
                            <ul class="list-unstyled">
                                <li><a href="#" class="single_social_icon"><i class="fab fa-facebook-f"></i></a></li>
                                <li><a href="#" class="single_social_icon"><i class="fab fa-twitter"></i></a></li>
                                <li><a href="#" class="single_social_icon"><i class="fas fa-globe"></i></a></li>
                                <li><a href="#" class="single_social_icon"><i class="fab fa-behance"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer> -->
    <!--::footer_part end::-->
<script>
  const searchForm = document.getElementById("search-form");
  const resultsContainer = document.getElementById("results-container");

  searchForm.addEventListener("submit", async (event) => {
    event.preventDefault();

    const formData = new FormData(searchForm);
    const searchParams = new URLSearchParams(formData);

    const response = await fetch(`/search?${searchParams.toString()}`);
    const { products, count, totalPage } = await response.json();

    resultsContainer.innerHTML = `
      <p>Showing ${products.length} of ${count} results</p>
      <section class="cat_product_area section_padding">
        <div class="container">
          <div class="row">
            <div class="row">
              ${products
                .map(
                  (product) => `
                    <div class="col-lg-3 col-md-6 mb-4">
                      <div class="card h-100">
                        <img src="/productImages/${product.productImages[0]}" alt="" class="card-img-top">
                        <div class="card-body">
                          <h4 class="card-title">${product.productName}</h4>
                          <h3>$${product.price}</h3>
                          <a href="/productShop?id=${product._id}" class="">View Details</a>
                          <br>
                          <a href="/addToCart?id=${product._id}" class="add_cart">+ Add to Cart</a>
                          <br>
                          <a href="/addToWishlist?id=${product._id}" class="ti-heart"></a>
                        </div>
                      </div>
                    </div>
                  `
                )
                .join("")}
            </div>
          </div>
        </div>
      </section>
    `;

    const paginationContainer = document.createElement("div");
    paginationContainer.className = "pagination-container";
    const currentPage = parseInt(searchParams.get("page")) || 1;

    for (let i = 1; i <= totalPage; i++) {
      const pageLink = document.createElement("a");
      pageLink.className = `page-link ${i === currentPage ? "active" : ""}`;
      pageLink.href = `?${searchParams.toString()}&page=${i}`;
      console.log(pageLink.href);
      pageLink.textContent = i;

      paginationContainer.appendChild(pageLink);
    }

    resultsContainer.appendChild(paginationContainer);
  });
</script>











 

<!-- <script>
  const searchForm = document.getElementById("search-form");
  const resultsContainer = document.getElementById("results-container");

  searchForm.addEventListener("submit", async (event) => {
    event.preventDefault();

    const formData = new FormData(searchForm);
    const searchParams = new URLSearchParams(formData);

    const response = await fetch(`/search?${searchParams.toString()}`);
    const { products, count, totalPage } = await response.json();

    resultsContainer.innerHTML = `
      <p>Showing ${products.length} of ${count} results</p>
      <section class="cat_product_area section_padding">
        <div class="container">
          <div class="row">
            <div class="row">
              ${products
                .map(
                  (product) => `
                    <div class="col-lg-3 col-md-6 mb-4">
                      <div class="card h-100">
                        <img src="/productImages/${product.productImages[0]}" alt="" class="card-img-top">
                        <div class="card-body">
                          <h4 class="card-title">${product.productName}</h4>
                          <h3>$${product.price}</h3>
                          <a href="/productShop?id=${product._id}" class="">View Details</a>
                          <br>
                          <a href="/addToCart?id=${product._id}" class="add_cart">+ Add to Cart</a>
                          <br>
                          <a href="/addToWishlist?id=${product._id}" class="ti-heart"></a>
                        </div>
                      </div>
                    </div>
                  `
                )
                .join("")}
            </div>
          </div>
        </div>
      </section>
    `;

    const paginationContainer = document.createElement("div");
    paginationContainer.className = "pagination-container";
    const currentPage = parseInt(searchParams.get("page")) || 1;

    for (let i = 1; i <= totalPage; i++) {
      const pageLink = document.createElement("a");
      pageLink.className = `page-link ${i === currentPage ? "active" : ""}`;
      pageLink.href = `?${searchParams.toString()}&page=${i}`;
      console.log(pageLink.href);
      pageLink.textContent = i;

      paginationContainer.appendChild(pageLink);
    }

    resultsContainer.appendChild(paginationContainer);
  });
</script>
  -->
    

<script>
  
</script>
  
    <!-- jquery plugins here-->
    <script src="js/jquery-1.12.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- easing js -->
    <script src="js/jquery.magnific-popup.js"></script>
    <!-- swiper js -->
    <script src="js/swiper.min.js"></script>
    <!-- swiper js -->
    <script src="js/masonry.pkgd.js"></script>
    <!-- particles js -->
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <!-- slick js -->
    <script src="js/slick.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/contact.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/mail-script.js"></script>
    <script src="js/stellar.js"></script>
    <script src="js/price_rangs.js"></script>
  </body>
</html>
